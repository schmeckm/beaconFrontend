"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2237],{62237:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(15861),s=n(70885),r=n(64687),c=n.n(r),i=n(16094),o=n(72791),l=n(47239),u=n(72426),d=n.n(u),m=n(39868),f=n(30577),p=n(80184);function x(){var e=o.useState([]),t=(0,s.Z)(e,2),n=t[0],r=t[1],u=o.useState(""),x=(0,s.Z)(u,2),h=x[0],b=x[1],j=o.useState(""),g=(0,s.Z)(j,2),v=g[0],y=g[1],N=o.useState(""),w=(0,s.Z)(N,2),S=w[0],_=w[1],k=o.useState([]),C=(0,s.Z)(k,2),P=C[0],Z=C[1];return o.useEffect((function(){function e(){return(e=(0,a.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.HQ+"dbBeacon/getAllBeacons",{method:"GET"});case 2:if(!0!==(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,r(n.data.map((function(e,t){return{value:e._id,label:e.beaconMac}})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"container create-page-main-section",children:(0,p.jsx)("div",{className:"p-sm-5 create-form-field",children:(0,p.jsxs)("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),h){var t=function(){var e=(0,a.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.HQ+"beacon/getPosition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({beaconMac:h.label,startTime:new Date(v).toISOString(),endTime:new Date(S).toISOString()})});case 2:if(1!=(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:1==(n=e.sent).success&&(console.log(n),console.log(v),Z(n.data.map((function(e,t){return{"#":t+1,id:e._id,beaconMac:e.beaconMac,positionX:e.positionX,positionY:e.positionY,createdAt:d()(e.createdAt).format("MM-DD-YYYY hh:mm:ss A")}})))),e.next=11;break;case 10:f.Am.error("Oops something went wrong!");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}else f.Am.error("Please select beacon")}(e)},children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-4 form-group",children:[(0,p.jsx)("label",{children:"Beacon"}),(0,p.jsx)(l.ZP,{value:h,onChange:b,options:n})]}),(0,p.jsxs)("div",{className:"col-md-4 form-group",children:[(0,p.jsx)("label",{children:"Start Time"}),(0,p.jsx)("input",{type:"datetime-local",className:"form-control",value:v,onChange:function(e){return y(e.target.value)},required:!0})]}),(0,p.jsxs)("div",{className:"col-md-4 form-group",children:[(0,p.jsx)("label",{children:"End Time"}),(0,p.jsx)("input",{type:"datetime-local",className:"form-control",value:S,onChange:function(e){return _(e.target.value)},required:!0})]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-center create-catagory-btns",children:[(0,p.jsxs)("button",{onClick:function(){return window.history.back()},type:"button",className:"font-weight-bold m-3 py-2 px-4 btn btn-danger",children:["Cancel",(0,p.jsx)("i",{className:"px-2 fa fa-times","aria-hidden":"true"})]}),(0,p.jsxs)("button",{type:"submit",className:"font-weight-bold m-3 py-2 px-4 btn btn-success",children:["Execute",(0,p.jsx)("i",{className:"px-2 fa fa-floppy-o","aria-hidden":"true"})]})]})]})})}),(0,p.jsx)("div",{className:"container",children:(0,p.jsx)(m.b7,{className:"mt-2",xs:"12",lg:"12",children:(0,p.jsx)(m.xH,{children:(0,p.jsx)(m.sl,{children:(0,p.jsx)(m.x,{items:P,fields:["#","beaconMac","positionX","positionY","createdAt"],columnFilter:!0,tableFilter:!0,itemsPerPageSelect:!0,itemsPerPage:5,hover:!0,sorter:!0,pagination:!0})})})})}),(0,p.jsx)(f.Ix,{})]})}}}]);
//# sourceMappingURL=2237.b3ddac15.chunk.js.map