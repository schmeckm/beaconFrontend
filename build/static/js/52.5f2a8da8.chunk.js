(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[52],{804:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(668),c=n(128),s=n(669),r=n.n(s),i=n(667),o=n(1),l=n.n(o),u=n(677),b=n(701),d=n.n(b),j=n(664),m=n(670),p=n(18);function f(){var e=l.a.useState([]),t=Object(c.a)(e,2),n=t[0],s=t[1],o=l.a.useState(""),b=Object(c.a)(o,2),f=b[0],h=b[1],x=l.a.useState(""),O=Object(c.a)(x,2),g=O[0],v=O[1],y=l.a.useState(""),N=Object(c.a)(y,2),w=N[0],S=N[1],k=l.a.useState([]),M=Object(c.a)(k,2),P=M[0],T=M[1];return l.a.useEffect((function(){function e(){return(e=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.a+"dbBeacon/getAllBeacons",{method:"GET"});case 2:if(!0!==(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,s(n.data.map((function(e,t){return{value:e._id,label:e.beaconMac}})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"container create-page-main-section",children:Object(p.jsx)("div",{className:"p-sm-5 create-form-field",children:Object(p.jsxs)("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),f){var t=function(){var e=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.a+"beacon/getPosition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({beaconMac:f.label,startTime:new Date(g).toISOString(),endTime:new Date(w).toISOString()})});case 2:if(1!=(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:1==(n=e.sent).success&&(console.log(n),T(n.data.map((function(e,t){return{"#":t+1,id:e._id,beaconMac:e.beaconMac,positionX:e.positionX,positionY:e.positionY,createdAt:d()(e.createdAt).format("MM-DD-YYYY hh:mm:ss A")}})))),e.next=11;break;case 10:m.b.error("Oops something went wrong!");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}else m.b.error("Please select beacon")}(e)},children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{children:"Beacon"}),Object(p.jsx)(u.a,{value:f,onChange:h,options:n})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{children:"Start Time"}),Object(p.jsx)("input",{type:"datetime-local",className:"form-control",value:g,onChange:function(e){return v(e.target.value)},required:!0})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{children:"End Time"}),Object(p.jsx)("input",{type:"datetime-local",className:"form-control",value:w,onChange:function(e){return S(e.target.value)},required:!0})]})]}),Object(p.jsxs)("div",{className:"d-flex justify-content-center create-catagory-btns",children:[Object(p.jsxs)("button",{onClick:function(){return window.history.back()},type:"button",className:"font-weight-bold m-3 py-2 px-4 btn btn-danger",children:["Cancel",Object(p.jsx)("i",{className:"px-2 fa fa-times","aria-hidden":"true"})]}),Object(p.jsxs)("button",{type:"submit",className:"font-weight-bold m-3 py-2 px-4 btn btn-success",children:["Execute",Object(p.jsx)("i",{className:"px-2 fa fa-floppy-o","aria-hidden":"true"})]})]})]})})}),Object(p.jsx)("div",{className:"container",children:Object(p.jsx)(j.u,{className:"mt-2",xs:"12",lg:"12",children:Object(p.jsx)(j.j,{children:Object(p.jsx)(j.k,{children:Object(p.jsx)(j.y,{items:P,fields:["#","beaconMac","positionX","positionY","createdAt"],columnFilter:!0,tableFilter:!0,itemsPerPageSelect:!0,itemsPerPage:5,hover:!0,sorter:!0,pagination:!0})})})})}),Object(p.jsx)(m.a,{})]})}}}]);
//# sourceMappingURL=52.5f2a8da8.chunk.js.map